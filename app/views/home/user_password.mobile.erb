<div class="newstop">
        <a href="http://my.xredu.com"></a>
        <p id="ttp">
            完善信息
        </p>
        <div class="clear">
        </div>
    </div>
    <h3 class="news_h3">
        <a href="tel:4006202002">咨询热线：400-620-2002</a>
    </h3>
   <h3 class="news_map">
        <a href="http://my.xredu.com">我的课堂</a>> 修改密码
    </h3>
    <div class="my_class_card_tt">
        <span class="nonosp" id="bjbtn"><a href="<%=user_profile_path %>">完善信息</a></span> <span id="listbtn">修改密码</span>
    </div>
    <%= form_for @current_user, :url => update_user_password_path, :method => :post, :html => { :id => "xgmmForm" } do |f| -%>
    <div class="my_classlist2" id="list" style="margin-top: -1px; padding-top: 1px;">
    <br />
        <p class="hp_input_p">
        <span class="s1">用户名：</span>
        <%= @current_user.name %>
        <br />
    </p>
     <p class="hp_input_p">
        <span class="s1">原密码：</span>
        <input type="password" id="user_current_password" placeholder="请输入您的原密码" name="user[current_password]" class="s1" />
        <br />
    </p>
    <p class="hp_input_p">
        <span class="s1">新密码：</span>
        <input type="password" id="user_password" name="user[password]" placeholder="请输入您的新密码" class="s1" />
        <br />
    </p>
    <p class="hp_input_p">
        <span class="s1">确认密码：</span>
        <input type="password" id="user_password_confirmation" name="user[password_confirmation]" placeholder="请输入您的确认密码" class="s1" />
        <br />
    </p>
    <br />
     <a href="javascript:update_user_password(this);" class="rega1 rega2">确认</a>
     <br /><br /><br />
        <div class="clear">
        </div>
    </div>
    <% end %>
    <h3 class="hp_grh3">
        热门活动
    </h3>
    <a href="http://product.xredu.com/" class="hp_botad">
        <img alt="" src="<%=GlobalSettings.image_domain %>/mobTheme/images/hp_ad4.gif" />
    </a>
    <%=cms_part_page("589") %>
<%= content_for :javascripts do -%>
<script type="text/javascript" charset="utf-8">
function update_user_password(btn) {
    btn.disabled = true;
    if ($("#user_current_password").val() == '') {
        btn.disabled = false;
        alert("原密码不能为空!");
        return;
    }
    if ($("#user_password").val() == '') {
        btn.disabled = false;
        alert("新密码不能为空!");
        return;
    }
    if ($("#user_password").val().length < 6) {
        btn.disabled = false;
        alert("新密码不能少于6位!");
        return;
    }
    if ($("#user_password_confirmation").val() == '') {
        btn.disabled = false;
        alert("确认密码不能为空!");
        return;
    }
    
    if ($("#user_current_password").val() == $("#user_password").val()) {
        btn.disabled = false;
        alert("原密码和新密码不能一样!");
        return;
    }
    
    if ($("#user_password_confirmation").val() != $("#user_password").val()) {
        btn.disabled = false;
        alert("新密码和确认密码不一致!");
        return;
    }

    $.post($("#xgmmForm").attr("action"), $("#xgmmForm").serialize(), function(data) {  
        alert(data.msg);
        btn.disabled = false;
    });
}
</script>
<% end -%>